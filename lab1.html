<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Цветовые модели</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #0ea5e9;
            --background: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.08);
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --radius-lg: 16px;
            --radius-md: 12px;
            --radius-sm: 8px;
            --transition: all 0.25s ease;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            margin: 0;
            padding: 24px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }
        
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }
        
        header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 40px;
            padding-top: 20px;
        }
        
        h1 {
            color: var(--text);
            margin: 0 0 12px 0;
            font-size: 42px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }
        
        .subtitle {
            color: var(--text-light);
            font-size: 18px;
            font-weight: 500;
            margin: 0;
        }
        
        .color-preview {
            grid-column: 1 / -1;
            height: 140px;
            border-radius: var(--radius-lg);
            margin-bottom: 32px;
            border: 3px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 20px;
            transition: var(--transition);
            box-shadow: 0 8px 32px var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .color-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .color-model {
            background: var(--card);
            border-radius: var(--radius-lg);
            padding: 28px;
            box-shadow: 0 4px 24px var(--shadow);
            border: 1px solid var(--border);
            transition: var(--transition);
        }
        
        .color-model:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
        }
        
        h2 {
            color: var(--text);
            border-bottom: 2px solid var(--border);
            padding-bottom: 16px;
            margin: 0 0 24px 0;
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        h2::before {
            content: '';
            width: 8px;
            height: 32px;
            background: linear-gradient(180deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 4px;
        }
        
        .color-input {
            margin-bottom: 20px;
        }
        
        .color-input:last-child {
            margin-bottom: 0;
        }
        
        .color-input label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text);
            font-size: 15px;
        }
        
        .color-value {
            font-weight: 700;
            color: var(--primary-dark);
            font-size: 16px;
            min-width: 40px;
            text-align: right;
        }
        
        input[type="range"] {
            width: 100%;
            height: 10px;
            margin-bottom: 8px;
            -webkit-appearance: none;
            background: var(--border);
            border-radius: 10px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.3);
            border: 3px solid white;
            transition: var(--transition);
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(99, 102, 241, 0.4);
        }
        
        .input-group {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .input-group input {
            flex: 1;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 16px;
            font-weight: 500;
            color: var(--text);
            transition: var(--transition);
            background: var(--background);
        }
        
        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .input-group input::placeholder {
            color: var(--text-light);
        }
        
        .range-warning {
            display: none;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%);
            padding: 16px;
            border-radius: var(--radius-sm);
            margin-top: 16px;
            font-size: 14px;
            color: var(--text);
            border-left: 4px solid var(--warning);
            animation: slideIn 0.3s ease;
        }
        
        .error {
            display: none;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%);
            padding: 16px;
            border-radius: var(--radius-sm);
            margin-top: 16px;
            font-size: 14px;
            color: var(--text);
            border-left: 4px solid var(--error);
            animation: slideIn 0.3s ease;
        }
        
        .color-picker-container {
            grid-column: 1 / -1;
            background: var(--card);
            border-radius: var(--radius-lg);
            padding: 32px;
            box-shadow: 0 4px 24px var(--shadow);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 8px;
        }
        
        .color-picker-label {
            font-size: 20px;
            font-weight: 700;
            color: var(--text);
        }
        
        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        #colorPicker {
            width: 80px;
            height: 80px;
            border: none;
            cursor: pointer;
            border-radius: var(--radius-md);
            border: 3px solid var(--border);
            padding: 0;
            transition: var(--transition);
        }
        
        #colorPicker:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }
        
        footer {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 48px;
            font-size: 15px;
            color: var(--text-light);
            padding: 24px 0;
            border-top: 1px solid var(--border);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .model-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            font-weight: 700;
            color: white;
        }
        
        .rgb-icon { background: linear-gradient(135deg, #ef4444 0%, #f97316 50%, #3b82f6 100%); }
        .cmyk-icon { background: linear-gradient(135deg, #06b6d4 0%, #8b5cf6 33%, #ec4899 66%, #000000 100%); }
        .hsv-icon { background: linear-gradient(135deg, #f59e0b 0%, #84cc16 50%, #10b981 100%); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Цветовые модели</h1>
            <p class="subtitle">Интерактивный конвертер цветов в реальном времени</p>
        </header>
        
        <div class="color-preview" id="colorPreview">
            Выбранный цвет
        </div>
        
        <div class="color-model">
            <div class="model-icon rgb-icon">RGB</div>
            <h2>RGB</h2>
            <div class="color-input">
                <label for="rSlider">
                    Красный (R)
                    <span class="color-value" id="rValue">128</span>
                </label>
                <input type="range" id="rSlider" min="0" max="255" value="128">
                <div class="input-group">
                    <input type="number" id="rInput" min="0" max="255" value="128" placeholder="0-255">
                </div>
            </div>
            <div class="color-input">
                <label for="gSlider">
                    Зеленый (G)
                    <span class="color-value" id="gValue">128</span>
                </label>
                <input type="range" id="gSlider" min="0" max="255" value="128">
                <div class="input-group">
                    <input type="number" id="gInput" min="0" max="255" value="128" placeholder="0-255">
                </div>
            </div>
            <div class="color-input">
                <label for="bSlider">
                    Синий (B)
                    <span class="color-value" id="bValue">128</span>
                </label>
                <input type="range" id="bSlider" min="0" max="255" value="128">
                <div class="input-group">
                    <input type="number" id="bInput" min="0" max="255" value="128" placeholder="0-255">
                </div>
            </div>
            <div class="range-warning" id="rgbRangeWarning">Значение было скорректировано для соответствия диапазону 0-255</div>
            <div class="error" id="rgbError"></div>
        </div>
        
        <div class="color-model">
            <div class="model-icon cmyk-icon">CMYK</div>
            <h2>CMYK</h2>
            <div class="color-input">
                <label for="cSlider">
                    Голубой (C)
                    <span class="color-value" id="cValue">0</span>%
                </label>
                <input type="range" id="cSlider" min="0" max="100" value="0">
                <div class="input-group">
                    <input type="number" id="cInput" min="0" max="100" value="0" placeholder="0-100%">
                </div>
            </div>
            <div class="color-input">
                <label for="mSlider">
                    Пурпурный (M)
                    <span class="color-value" id="mValue">0</span>%
                </label>
                <input type="range" id="mSlider" min="0" max="100" value="0">
                <div class="input-group">
                    <input type="number" id="mInput" min="0" max="100" value="0" placeholder="0-100%">
                </div>
            </div>
            <div class="color-input">
                <label for="ySlider">
                    Желтый (Y)
                    <span class="color-value" id="yValue">0</span>%
                </label>
                <input type="range" id="ySlider" min="0" max="100" value="0">
                <div class="input-group">
                    <input type="number" id="yInput" min="0" max="100" value="0" placeholder="0-100%">
                </div>
            </div>
            <div class="color-input">
                <label for="kSlider">
                    Черный (K)
                    <span class="color-value" id="kValue">0</span>%
                </label>
                <input type="range" id="kSlider" min="0" max="100" value="0">
                <div class="input-group">
                    <input type="number" id="kInput" min="0" max="100" value="0" placeholder="0-100%">
                </div>
            </div>
            <div class="range-warning" id="cmykRangeWarning">Значение было скорректировано для соответствия диапазону 0-100%</div>
            <div class="error" id="cmykError"></div>
        </div>
        
        <div class="color-model">
            <div class="model-icon hsv-icon">HSV</div>
            <h2>HSV</h2>
            <div class="color-input">
                <label for="hSlider">
                    Оттенок (H)
                    <span class="color-value" id="hValue">0</span>°
                </label>
                <input type="range" id="hSlider" min="0" max="360" value="0">
                <div class="input-group">
                    <input type="number" id="hInput" min="0" max="360" value="0" placeholder="0-360°">
                </div>
            </div>
            <div class="color-input">
                <label for="sSlider">
                    Насыщенность (S)
                    <span class="color-value" id="sValue">0</span>%
                </label>
                <input type="range" id="sSlider" min="0" max="100" value="0">
                <div class="input-group">
                    <input type="number" id="sInput" min="0" max="100" value="0" placeholder="0-100%">
                </div>
            </div>
            <div class="color-input">
                <label for="vSlider">
                    Яркость (V)
                    <span class="color-value" id="vValue">0</span>%
                </label>
                <input type="range" id="vSlider" min="0" max="100" value="0">
                <div class="input-group">
                    <input type="number" id="vInput" min="0" max="100" value="0" placeholder="0-100%">
                </div>
            </div>
            <div class="range-warning" id="hsvRangeWarning">Значение было скорректировано для соответствия допустимому диапазону</div>
            <div class="error" id="hsvError"></div>
        </div>
        
        <div class="color-picker-container">
            <div class="color-picker-label">Выбор цвета из палитры</div>
            <div class="color-picker-wrapper">
                <input type="color" id="colorPicker" value="#808080">
            </div>
        </div>
        
        <footer>
            <p>Лабораторная работа по цветовым моделям. Вариант 15: RGB ↔ CMYK ↔ HSV</p>
        </footer>
    </div>

    <script>
        const colorPreview = document.getElementById('colorPreview');
        
        const rSlider = document.getElementById('rSlider');
        const gSlider = document.getElementById('gSlider');
        const bSlider = document.getElementById('bSlider');
        const rInput = document.getElementById('rInput');
        const gInput = document.getElementById('gInput');
        const bInput = document.getElementById('bInput');
        const rValue = document.getElementById('rValue');
        const gValue = document.getElementById('gValue');
        const bValue = document.getElementById('bValue');
        const rgbRangeWarning = document.getElementById('rgbRangeWarning');
        const rgbError = document.getElementById('rgbError');
        
        const cSlider = document.getElementById('cSlider');
        const mSlider = document.getElementById('mSlider');
        const ySlider = document.getElementById('ySlider');
        const kSlider = document.getElementById('kSlider');
        const cInput = document.getElementById('cInput');
        const mInput = document.getElementById('mInput');
        const yInput = document.getElementById('yInput');
        const kInput = document.getElementById('kInput');
        const cValue = document.getElementById('cValue');
        const mValue = document.getElementById('mValue');
        const yValue = document.getElementById('yValue');
        const kValue = document.getElementById('kValue');
        const cmykRangeWarning = document.getElementById('cmykRangeWarning');
        const cmykError = document.getElementById('cmykError');
        
        const hSlider = document.getElementById('hSlider');
        const sSlider = document.getElementById('sSlider');
        const vSlider = document.getElementById('vSlider');
        const hInput = document.getElementById('hInput');
        const sInput = document.getElementById('sInput');
        const vInput = document.getElementById('vInput');
        const hValue = document.getElementById('hValue');
        const sValue = document.getElementById('sValue');
        const vValue = document.getElementById('vValue');
        const hsvRangeWarning = document.getElementById('hsvRangeWarning');
        const hsvError = document.getElementById('hsvError');
        
        const colorPicker = document.getElementById('colorPicker');
        
        let currentColor = { r: 128, g: 128, b: 128 };
        let rangeWarningTimeout = null;
        
        let updating = false;
        
        function init() {
            updateColorPreview();
            updateRGBValues();
            updateCMYKFromRGB();
            updateHSVFromRGB();
            
            [rSlider, gSlider, bSlider].forEach(slider => {
                slider.addEventListener('input', function() {
                    if (updating) return;
                    updating = true;
                    
                    const correspondingInput = document.getElementById(this.id.replace('Slider', 'Input'));
                    correspondingInput.value = this.value;
                    
                    updateRGBFromSliders();
                    updateCMYKFromRGB();
                    updateHSVFromRGB();
                    updateColorPreview();
                    
                    updating = false;
                });
            });
            
            [rInput, gInput, bInput].forEach(input => {
                input.addEventListener('input', function() {
                    if (updating) return;
                    updating = true;
                    
                    let value = parseInt(this.value) || 0;
                    let corrected = false;
                    
                    if (value < 0) {
                        value = 0;
                        corrected = true;
                    }
                    if (value > 255) {
                        value = 255;
                        corrected = true;
                    }
                    
                    this.value = value;
                    
                    const correspondingSlider = document.getElementById(this.id.replace('Input', 'Slider'));
                    correspondingSlider.value = value;
                    
                    if (corrected) {
                        showRangeWarning('rgbRangeWarning');
                    }
                    
                    updateRGBFromInputs();
                    updateCMYKFromRGB();
                    updateHSVFromRGB();
                    updateColorPreview();
                    
                    updating = false;
                });
            });
            
            [cSlider, mSlider, ySlider, kSlider].forEach(slider => {
                slider.addEventListener('input', function() {
                    if (updating) return;
                    updating = true;
                    
                    const correspondingInput = document.getElementById(this.id.replace('Slider', 'Input'));
                    correspondingInput.value = this.value;
                    
                    updateCMYKFromSliders();
                    updateRGBFromCMYK();
                    updateHSVFromRGB();
                    updateColorPreview();
                    
                    updating = false;
                });
            });
            
            [cInput, mInput, yInput, kInput].forEach(input => {
                input.addEventListener('input', function() {
                    if (updating) return;
                    updating = true;
                    
                    let value = parseInt(this.value) || 0;
                    let corrected = false;
                    
                    if (value < 0) {
                        value = 0;
                        corrected = true;
                    }
                    if (value > 100) {
                        value = 100;
                        corrected = true;
                    }
                    
                    this.value = value;
                    
                    const correspondingSlider = document.getElementById(this.id.replace('Input', 'Slider'));
                    correspondingSlider.value = value;
                    
                    if (corrected) {
                        showRangeWarning('cmykRangeWarning');
                    }
                    
                    updateCMYKFromInputs();
                    updateRGBFromCMYK();
                    updateHSVFromRGB();
                    updateColorPreview();
                    
                    updating = false;
                });
            });
            
            [hSlider, sSlider, vSlider].forEach(slider => {
                slider.addEventListener('input', function() {
                    if (updating) return;
                    updating = true;
                    
                    const correspondingInput = document.getElementById(this.id.replace('Slider', 'Input'));
                    correspondingInput.value = this.value;
                    
                    updateHSVFromSliders();
                    updateRGBFromHSV();
                    updateCMYKFromRGB();
                    updateColorPreview();
                    
                    updating = false;
                });
            });
            
            [hInput, sInput, vInput].forEach(input => {
                input.addEventListener('input', function() {
                    if (updating) return;
                    updating = true;
                    
                    let value = parseInt(this.value) || 0;
                    let corrected = false;
                    const max = this.id === 'hInput' ? 360 : 100;
                    
                    if (value < 0) {
                        value = 0;
                        corrected = true;
                    }
                    if (value > max) {
                        value = max;
                        corrected = true;
                    }
                    
                    this.value = value;
                    
                    const correspondingSlider = document.getElementById(this.id.replace('Input', 'Slider'));
                    correspondingSlider.value = value;
                    
                    if (corrected) {
                        showRangeWarning('hsvRangeWarning');
                    }
                    
                    updateHSVFromInputs();
                    updateRGBFromHSV();
                    updateCMYKFromRGB();
                    updateColorPreview();
                    
                    updating = false;
                });
            });
            
            colorPicker.addEventListener('input', function() {
                if (updating) return;
                updating = true;
                
                const hex = this.value;
                const r = parseInt(hex.substr(1, 2), 16);
                const g = parseInt(hex.substr(3, 2), 16);
                const b = parseInt(hex.substr(5, 2), 16);
                
                currentColor = { r, g, b };
                
                updateRGBValues();
                updateCMYKFromRGB();
                updateHSVFromRGB();
                updateColorPreview();
                
                updating = false;
            });
        }
        
        function showRangeWarning(warningId) {
            const warningElement = document.getElementById(warningId);
            warningElement.style.display = 'block';
            
            if (rangeWarningTimeout) {
                clearTimeout(rangeWarningTimeout);
            }
            
            rangeWarningTimeout = setTimeout(() => {
                warningElement.style.display = 'none';
            }, 3000);
        }
        
        function updateColorPreview() {
            const { r, g, b } = currentColor;
            const hex = rgbToHex(r, g, b);
            colorPreview.style.backgroundColor = hex;
            
            const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
            colorPreview.style.color = luminance > 0.5 ? '#000000' : '#FFFFFF';
            
            colorPreview.textContent = `RGB: ${r}, ${g}, ${b} | HEX: ${hex}`;
            
            colorPicker.value = hex;
        }
        
        function updateRGBFromSliders() {
            currentColor.r = parseInt(rSlider.value);
            currentColor.g = parseInt(gSlider.value);
            currentColor.b = parseInt(bSlider.value);
            updateRGBValues();
        }
        
        function updateRGBFromInputs() {
            currentColor.r = parseInt(rInput.value);
            currentColor.g = parseInt(gInput.value);
            currentColor.b = parseInt(bInput.value);
            updateRGBValues();
        }
        
        function updateRGBValues() {
            rSlider.value = currentColor.r;
            gSlider.value = currentColor.g;
            bSlider.value = currentColor.b;
            
            rInput.value = currentColor.r;
            gInput.value = currentColor.g;
            bInput.value = currentColor.b;
            
            rValue.textContent = currentColor.r;
            gValue.textContent = currentColor.g;
            bValue.textContent = currentColor.b;
        }
        
        function rgbToCmyk(r, g, b) {
            r = r / 255;
            g = g / 255;
            b = b / 255;
            
            const k = 1 - Math.max(r, g, b);
            
            if (k === 1) {
                return { c: 0, m: 0, y: 0, k: 100 };
            }
            
            const c = (1 - r - k) / (1 - k);
            const m = (1 - g - k) / (1 - k);
            const y = (1 - b - k) / (1 - k);
            
            return {
                c: Math.round(c * 100),
                m: Math.round(m * 100),
                y: Math.round(y * 100),
                k: Math.round(k * 100)
            };
        }
        
        function cmykToRgbDirect(c, m, y, k) {
    c = c / 100;
    m = m / 100;
    y = y / 100;
    k = k / 100;
    
    const r = Math.round(255 * (1 - Math.min(1, c * (1 - k) + k)));
    const g = Math.round(255 * (1 - Math.min(1, m * (1 - k) + k)));
    const b = Math.round(255 * (1 - Math.min(1, y * (1 - k) + k)));
    
    return {
        r: Math.max(0, Math.min(255, r)),
        g: Math.max(0, Math.min(255, g)),
        b: Math.max(0, Math.min(255, b))
    };
}

function cmykToRgb(c, m, y, k) {
    return cmykToRgbDirect(c, m, y, k);
}
        
        function updateCMYKFromRGB() {
            const { r, g, b } = currentColor;
            const cmyk = rgbToCmyk(r, g, b);
            
            cSlider.value = cmyk.c;
            mSlider.value = cmyk.m;
            ySlider.value = cmyk.y;
            kSlider.value = cmyk.k;
            
            cInput.value = cmyk.c;
            mInput.value = cmyk.m;
            yInput.value = cmyk.y;
            kInput.value = cmyk.k;
            
            cValue.textContent = cmyk.c;
            mValue.textContent = cmyk.m;
            yValue.textContent = cmyk.y;
            kValue.textContent = cmyk.k;
        }
        
        function updateCMYKFromSliders() {
            const c = parseInt(cSlider.value);
            const m = parseInt(mSlider.value);
            const y = parseInt(ySlider.value);
            const k = parseInt(kSlider.value);
            
            cInput.value = c;
            mInput.value = m;
            yInput.value = y;
            kInput.value = k;
            
            cValue.textContent = c;
            mValue.textContent = m;
            yValue.textContent = y;
            kValue.textContent = k;
        }
        
        function updateCMYKFromInputs() {
            const c = parseInt(cInput.value);
            const m = parseInt(mInput.value);
            const y = parseInt(yInput.value);
            const k = parseInt(kInput.value);
            
            cSlider.value = c;
            mSlider.value = m;
            ySlider.value = y;
            kSlider.value = k;
            
            cValue.textContent = c;
            mValue.textContent = m;
            yValue.textContent = y;
            kValue.textContent = k;
        }
        
        function updateRGBFromCMYK() {
            const c = parseInt(cSlider.value);
            const m = parseInt(mSlider.value);
            const y = parseInt(ySlider.value);
            const k = parseInt(kSlider.value);
            
            const rgb = cmykToRgb(c, m, y, k);
            currentColor = rgb;
            updateRGBValues();
        }

        function rgbToHsvPrecise(r, g, b) {
    r = r / 255;
    g = g / 255;
    b = b / 255;
    
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    const delta = max - min;
    
    let h = 0;
    let s = 0;
    const v = max;
    
    if (delta !== 0) {
        s = delta / max;
        
        if (max === r) {
            h = (g - b) / delta;
            if (g < b) h += 6;
        } else if (max === g) {
            h = 2 + (b - r) / delta;
        } else {
            h = 4 + (r - g) / delta;
        }
        
        h *= 60;
        if (h < 0) h += 360;
    }
    
    return {
        h: Math.floor(h),
        s: Math.round(s * 100),
        v: Math.round(v * 100)
    };
}
        
function rgbToHsv(r, g, b) {
    r = r / 255;
    g = g / 255;
    b = b / 255;
    
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    const delta = max - min;
    
    let h = 0;
    let s = 0;
    const v = max;
    
    if (delta !== 0) {
        s = delta / max;
        
        if (max === r) {
            h = (g - b) / delta;
            if (g < b) h += 6;
        } else if (max === g) {
            h = 2 + (b - r) / delta;
        } else {
            h = 4 + (r - g) / delta;
        }
        
        h *= 60;
        if (h < 0) h += 360;
        
        if (Math.abs(h - 270) < 0.0001) {
            h = 270;
        }
    }
    
    return {
        h: Math.floor(h),
        s: Math.round(s * 100),
        v: Math.round(v * 100)
    };
}
        
        function hsvToRgb(h, s, v) {
            h = h / 360;
            s = s / 100;
            v = v / 100;
            
            let r, g, b;
            
            const i = Math.floor(h * 6);
            const f = h * 6 - i;
            const p = v * (1 - s);
            const q = v * (1 - f * s);
            const t = v * (1 - (1 - f) * s);
            
            switch (i % 6) {
                case 0: r = v; g = t; b = p; break;
                case 1: r = q; g = v; b = p; break;
                case 2: r = p; g = v; b = t; break;
                case 3: r = p; g = q; b = v; break;
                case 4: r = t; g = p; b = v; break;
                case 5: r = v; g = p; b = q; break;
            }
            
            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }
        
        function updateHSVFromRGB() {
            const { r, g, b } = currentColor;
            const hsv = rgbToHsv(r, g, b);
            
            hSlider.value = hsv.h;
            sSlider.value = hsv.s;
            vSlider.value = hsv.v;
            
            hInput.value = hsv.h;
            sInput.value = hsv.s;
            vInput.value = hsv.v;
            
            hValue.textContent = hsv.h;
            sValue.textContent = hsv.s;
            vValue.textContent = hsv.v;
        }
        
        function updateHSVFromSliders() {
            const h = parseInt(hSlider.value);
            const s = parseInt(sSlider.value);
            const v = parseInt(vSlider.value);
            
            hInput.value = h;
            sInput.value = s;
            vInput.value = v;
            
            hValue.textContent = h;
            sValue.textContent = s;
            vValue.textContent = v;
        }
        
        function updateHSVFromInputs() {
            const h = parseInt(hInput.value);
            const s = parseInt(sInput.value);
            const v = parseInt(vInput.value);
            
            hSlider.value = h;
            sSlider.value = s;
            vSlider.value = v;
            
            hValue.textContent = h;
            sValue.textContent = s;
            vValue.textContent = v;
        }
        
function updateRGBFromCMYK() {
    const c = parseInt(cSlider.value);
    const m = parseInt(mSlider.value);
    const y = parseInt(ySlider.value);
    const k = parseInt(kSlider.value);
    
    const rgb = cmykToRgb(c, m, y, k);
    
    currentColor.r = rgb.r;
    currentColor.g = rgb.g;
    currentColor.b = rgb.b;
    
    updateRGBValues();
}

function updateRGBValues() {
    rSlider.value = Math.round(currentColor.r);
    gSlider.value = Math.round(currentColor.g);
    bSlider.value = Math.round(currentColor.b);
    
    rInput.value = Math.round(currentColor.r);
    gInput.value = Math.round(currentColor.g);
    bInput.value = Math.round(currentColor.b);
    
    rValue.textContent = Math.round(currentColor.r);
    gValue.textContent = Math.round(currentColor.g);
    bValue.textContent = Math.round(currentColor.b);
}
        
        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }
        
        init();
    </script>
</body>
</html>